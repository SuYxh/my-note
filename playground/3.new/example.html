<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>

      function _new() {
        const Ctor = [].shift.call(arguments)
         // 参数判断
         if (typeof constructor !== 'function') {
          console.error('type error')
          return
        }
        // 新建一个空对象，对象的原型为构造函数的 prototype 对象
        const obj = Object.create(Ctor.prototype)
        // 将 this 指向新建对象，并执行函数
        const result = Ctor.apply(obj, arguments)
        // 判断返回
        return (typeof result === "object" || typeof result === "function") ? result : obj
      }

      function Animal(name) {
        this.name = name
      }

      const dog1 = _new(Animal, '旺财')
      const dog2 = new Animal('阿福')

      console.log(dog1 instanceof Animal, 'dog1', dog1)
      console.log(dog2 instanceof Animal, 'dog2', dog2)
    </script>
  </body>
</html>
