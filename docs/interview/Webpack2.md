**ã€Œè§‚æ„Ÿåº¦ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸã€**

**ã€Œå£å‘³ï¼šæ¸…è’¸é²ˆé±¼ã€**

**ã€Œçƒ¹é¥ªæ—¶é—´ï¼š15minã€**

æœ¬æ–‡å·²æ”¶å½•åœ¨`Github` [github.com/Geekhyt](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGeekhyt%2Ffront-end-canteen%2F)ï¼Œæ¬¢è¿Starã€‚

ä»å¤´å‘çš„æµ“å¯†ç¨‹åº¦å’Œå¹²ç»ƒçš„èµ°è·¯å§¿åŠ¿æˆ‘å¯Ÿè§‰åˆ°ï¼Œé¢å‰åç€çš„è¿™ä½é¢è¯•å®˜ä¹Ÿæ˜¯ä¸€æŠŠå¥½æ‰‹ã€‚æˆ‘åƒä»¥å¾€ä¸€æ ·ï¼Œå‡†å¤‡èŠ±3åˆ†é’Ÿçš„æ—¶é—´è¿›è¡Œè‡ªæˆ‘ä»‹ç»ã€‚åœ¨æ­¤æœŸé—´ï¼Œæˆ‘çš„ç›®å…‰è¢«16å¯¸çš„MacBook Proæ‰€å¸å¼•ï¼Œè¿™æ¬¡çš„è‡ªæˆ‘ä»‹ç»æˆ‘åšè¶³äº†å‡†å¤‡ï¼Œå¾ˆæœ‰ä¿¡å¿ƒå¾æœé¢è¯•å®˜ã€‚ä¸å‡ºæˆ‘æ‰€æ–™ï¼Œé¢è¯•å®˜è¢«æˆ‘å¼•å…¥äº†æˆ‘æ“…é•¿çš„é¢†åŸŸã€‚

> â

> çœ‹æ¥ä½ å¯¹Webpackå¾ˆç†Ÿæ‚‰ï¼Œé‚£æˆ‘æ¥è€ƒè€ƒä½ 

> â


## 0.æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä½ ç”¨è¿‡å“ªäº›Loaderï¼Ÿ

(æˆ‘å¼€å§‹ç†Ÿæ‚‰çš„æŠ¥èµ·äº†èœå)

- 
`raw-loader`ï¼šåŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰

- 
`file-loader`ï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)

- 
`url-loader`ï¼šä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™ file-loader å¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)

- 
`source-map-loader`ï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•

- 
`svg-inline-loader`ï¼šå°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­

- 
`image-loader`ï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶

- 
`json-loader` åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰

- 
`handlebars-loader`: å°† Handlebars æ¨¡ç‰ˆç¼–è¯‘æˆå‡½æ•°å¹¶è¿”å›

- 
`babel-loader`ï¼šæŠŠ ES6 è½¬æ¢æˆ ES5

- 
`ts-loader`: å°† TypeScript è½¬æ¢æˆ JavaScript

- 
`awesome-typescript-loader`ï¼šå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader

- 
`sass-loader`ï¼šå°†SCSS/SASSä»£ç è½¬æ¢æˆCSS

- 
`css-loader`ï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§

- 
`style-loader`ï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS

- 
`postcss-loader`ï¼šæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œå¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€

- 
`eslint-loader`ï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç 

- 
`tslint-loader`ï¼šé€šè¿‡ TSLintæ£€æŸ¥ TypeScript ä»£ç 

- 
`mocha-loader`ï¼šåŠ è½½ Mocha æµ‹è¯•ç”¨ä¾‹çš„ä»£ç 

- 
`coverjs-loader`ï¼šè®¡ç®—æµ‹è¯•çš„è¦†ç›–ç‡

- 
`vue-loader`ï¼šåŠ è½½ Vue.js å•æ–‡ä»¶ç»„ä»¶

- 
`i18n-loader`: å›½é™…åŒ–

- 
`cache-loader`: å¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ


æ›´å¤š Loader è¯·å‚è€ƒ[å®˜ç½‘](https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Floaders%2F)

(é¢è¯•å®˜ï¼šæŒºå¥½ï¼ŒçŸ¥é“çš„è¿˜æŒºå¤š)

## 1.æœ‰å“ªäº›å¸¸è§çš„Pluginï¼Ÿä½ ç”¨è¿‡å“ªäº›Pluginï¼Ÿ

(è¿™å¤§å…„å¼Ÿå¥½åƒå¬ä¸Šç˜¾äº†ï¼Œç»§ç»­å¼€å¯å¸¸è§„æ“ä½œ)

- 
`define-plugin`ï¼šå®šä¹‰ç¯å¢ƒå˜é‡ (Webpack4 ä¹‹åæŒ‡å®š mode ä¼šè‡ªåŠ¨é…ç½®)

- 
`ignore-plugin`ï¼šå¿½ç•¥éƒ¨åˆ†æ–‡ä»¶

- 
`html-webpack-plugin`ï¼šç®€åŒ– HTML æ–‡ä»¶åˆ›å»º (ä¾èµ–äº html-loader)

- 
`web-webpack-plugin`ï¼šå¯æ–¹ä¾¿åœ°ä¸ºå•é¡µåº”ç”¨è¾“å‡º HTMLï¼Œæ¯” html-webpack-plugin å¥½ç”¨

- 
`uglifyjs-webpack-plugin`ï¼šä¸æ”¯æŒ ES6 å‹ç¼© (Webpack4 ä»¥å‰)

- 
`terser-webpack-plugin`: æ”¯æŒå‹ç¼© ES6 (Webpack4)

- 
`webpack-parallel-uglify-plugin`: å¤šè¿›ç¨‹æ‰§è¡Œä»£ç å‹ç¼©ï¼Œæå‡æ„å»ºé€Ÿåº¦

- 
`mini-css-extract-plugin`: åˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ (æ›¿ä»£extract-text-webpack-plugin)

- 
`serviceworker-webpack-plugin`ï¼šä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½

- 
`clean-webpack-plugin`: ç›®å½•æ¸…ç†

- 
`ModuleConcatenationPlugin`: å¼€å¯ Scope Hoisting

- 
`speed-measure-webpack-plugin`: å¯ä»¥çœ‹åˆ°æ¯ä¸ª Loader å’Œ Plugin æ‰§è¡Œè€—æ—¶ (æ•´ä¸ªæ‰“åŒ…è€—æ—¶ã€æ¯ä¸ª Plugin å’Œ Loader è€—æ—¶)

- 
`webpack-bundle-analyzer`: å¯è§†åŒ– Webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ (ä¸šåŠ¡ç»„ä»¶ã€ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å—)


æ›´å¤š Plugin è¯·å‚è€ƒ[å®˜ç½‘](https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Fplugins%2F)

(Double Kill)

## 2.é‚£ä½ å†è¯´ä¸€è¯´Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ

(å°±çŸ¥é“ä½ ä¼šé—®è¿™ä¸ªï¼Œæˆ‘ç”¨æ‰‹æ©ç›–ç€å˜´è§’çš„å¾®ç¬‘)

`Loader` æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚ å› ä¸º Webpack åªè®¤è¯† JavaScriptï¼Œæ‰€ä»¥ Loader å°±æˆäº†ç¿»è¯‘å®˜ï¼Œå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚

`Plugin` å°±æ˜¯æ’ä»¶ï¼ŒåŸºäºäº‹ä»¶æµæ¡†æ¶ `Tapable`ï¼Œæ’ä»¶å¯ä»¥æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œåœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚

`Loader` åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª Objectï¼Œå†…éƒ¨åŒ…å«äº† test(ç±»å‹æ–‡ä»¶)ã€loaderã€options (å‚æ•°)ç­‰å±æ€§ã€‚

`Plugin` åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª Plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚

## 3.Webpackæ„å»ºæµç¨‹ç®€å•è¯´ä¸€ä¸‹

Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š

- 
`åˆå§‹åŒ–å‚æ•°`ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°

- 
`å¼€å§‹ç¼–è¯‘`ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘

- 
`ç¡®å®šå…¥å£`ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶

- 
`ç¼–è¯‘æ¨¡å—`ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†

- 
`å®Œæˆæ¨¡å—ç¼–è¯‘`ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»

- 
`è¾“å‡ºèµ„æº`ï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š

- 
`è¾“å‡ºå®Œæˆ`ï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ


åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œ`Webpack` ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚

ç®€å•è¯´

- 
åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½ Pluginï¼Œå®ä¾‹åŒ– Compiler

- 
ç¼–è¯‘ï¼šä» Entry å‡ºå‘ï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ Loader å»ç¿»è¯‘æ–‡ä»¶çš„å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†

- 
è¾“å‡ºï¼šå°†ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼Œå°† Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­


å¯¹æºç æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç§»æ­¥æˆ‘çš„å¦ä¸€ç¯‡ä¸“æ [ä»æºç çª¥æ¢Webpack4.xåŸç†](https://juejin.cn/post/6844904046294204429)

## 4.ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œä½ ç”¨è¿‡å“ªäº›å¯ä»¥æé«˜æ•ˆç‡çš„æ’ä»¶ï¼Ÿ

(è¿™é“é¢˜è¿˜è›®æ³¨é‡å®é™…ï¼Œç”¨æˆ·çš„ä½“éªŒè¿˜æ˜¯è¦ä»å°æŠ“èµ·çš„)

- 
`webpack-dashboard`ï¼šå¯ä»¥æ›´å‹å¥½çš„å±•ç¤ºç›¸å…³æ‰“åŒ…ä¿¡æ¯ã€‚

- 
`webpack-merge`ï¼šæå–å…¬å…±é…ç½®ï¼Œå‡å°‘é‡å¤é…ç½®ä»£ç 

- 
`speed-measure-webpack-plugin`ï¼šç®€ç§° SMPï¼Œåˆ†æå‡º Webpack æ‰“åŒ…è¿‡ç¨‹ä¸­ Loader å’Œ Plugin çš„è€—æ—¶ï¼Œæœ‰åŠ©äºæ‰¾åˆ°æ„å»ºè¿‡ç¨‹ä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚

- 
`size-plugin`ï¼šç›‘æ§èµ„æºä½“ç§¯å˜åŒ–ï¼Œå°½æ—©å‘ç°é—®é¢˜

- 
`HotModuleReplacementPlugin`ï¼šæ¨¡å—çƒ­æ›¿æ¢


## 5.source mapæ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ

`source map` æ˜¯å°†ç¼–è¯‘ã€æ‰“åŒ…ã€å‹ç¼©åçš„ä»£ç æ˜ å°„å›æºä»£ç çš„è¿‡ç¨‹ã€‚æ‰“åŒ…å‹ç¼©åçš„ä»£ç ä¸å…·å¤‡è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæƒ³è¦è°ƒè¯•æºç å°±éœ€è¦ soucre mapã€‚

mapæ–‡ä»¶åªè¦ä¸æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šåŠ è½½çš„ã€‚

çº¿ä¸Šç¯å¢ƒä¸€èˆ¬æœ‰ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼š

- 
`hidden-source-map`ï¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹é”™è¯¯ç›‘æ§å¹³å° Sentry ä½¿ç”¨

- 
`nosources-source-map`ï¼šåªä¼šæ˜¾ç¤ºå…·ä½“è¡Œæ•°ä»¥åŠæŸ¥çœ‹æºä»£ç çš„é”™è¯¯æ ˆã€‚å®‰å…¨æ€§æ¯” sourcemap é«˜

- 
`sourcemap`ï¼šé€šè¿‡ nginx è®¾ç½®å°† .map æ–‡ä»¶åªå¯¹ç™½åå•å¼€æ”¾(å…¬å¸å†…ç½‘)


æ³¨æ„ï¼šé¿å…åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ `inline-` å’Œ `eval-`ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¢åŠ  bundle ä½“ç§¯å¤§å°ï¼Œå¹¶é™ä½æ•´ä½“æ€§èƒ½ã€‚

## 6.æ¨¡å—æ‰“åŒ…åŸç†çŸ¥é“å—ï¼Ÿ

Webpack å®é™…ä¸Šä¸ºæ¯ä¸ªæ¨¡å—åˆ›é€ äº†ä¸€ä¸ªå¯ä»¥å¯¼å‡ºå’Œå¯¼å…¥çš„ç¯å¢ƒï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ä¿®æ”¹ ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œä»£ç æ‰§è¡Œé¡ºåºä¸æ¨¡å—åŠ è½½é¡ºåºä¹Ÿå®Œå…¨ä¸€è‡´ã€‚

## 7.æ–‡ä»¶ç›‘å¬åŸç†å‘¢ï¼Ÿ

åœ¨å‘ç°æºç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºå‡ºæ–°çš„è¾“å‡ºæ–‡ä»¶ã€‚

Webpackå¼€å¯ç›‘å¬æ¨¡å¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

- å¯åŠ¨ webpack å‘½ä»¤æ—¶ï¼Œå¸¦ä¸Š --watch å‚æ•°
- åœ¨é…ç½® webpack.config.js ä¸­è®¾ç½® watch:true

ç¼ºç‚¹ï¼šæ¯æ¬¡éœ€è¦æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨

åŸç†ï¼šè½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶ä¸ä¼šç«‹åˆ»å‘Šè¯‰ç›‘å¬è€…ï¼Œè€Œæ˜¯å…ˆç¼“å­˜èµ·æ¥ï¼Œç­‰ `aggregateTimeout` åå†æ‰§è¡Œã€‚

```
module.export = {    // é»˜è®¤false,ä¹Ÿå°±æ˜¯ä¸å¼€å¯    watch: true,    // åªæœ‰å¼€å¯ç›‘å¬æ¨¡å¼æ—¶ï¼ŒwatchOptionsæ‰æœ‰æ„ä¹‰    watchOptions: {        // é»˜è®¤ä¸ºç©ºï¼Œä¸ç›‘å¬çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…        ignored: /node_modules/,        // ç›‘å¬åˆ°å˜åŒ–å‘ç”Ÿåä¼šç­‰300mså†å»æ‰§è¡Œï¼Œé»˜è®¤300ms        aggregateTimeout:300,        // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŒ–æ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡æœ‰å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’é—®1000æ¬¡        poll:1000    }}å¤åˆ¶ä»£ç 
```

## 8.è¯´ä¸€ä¸‹ Webpack çš„çƒ­æ›´æ–°åŸç†å§

(æ•²é»‘æ¿ï¼Œè¿™é“é¢˜å¿…è€ƒ)

`Webpack` çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆ`Hot Module Replacement`ï¼‰ï¼Œç¼©å†™ä¸º `HMR`ã€‚ è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚

HMRçš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ chunk diff (chunk éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š WDS ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª `Websocket`ï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒWDS ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ WDS å‘èµ· `Ajax` è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€hash)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ WDS å‘èµ· `jsonp` è¯·æ±‚è·å–è¯¥chunkçš„å¢é‡æ›´æ–°ã€‚

åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± `HotModulePlugin` æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒ`react-hot-loader` å’Œ `vue-loader` éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚

ç»†èŠ‚è¯·å‚è€ƒ[Webpack HMR åŸç†è§£æ](https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F30669007)

(é¢è¯•å®˜ï¼šä¸é”™ä¸é”™ï¼Œå°ä¼™å­è¡¨è¾¾èƒ½åŠ›ä¸é”™)

(åŸºæ“ï¼Œå‹¿6)

## 9.å¦‚ä½•å¯¹bundleä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Ÿ

`VSCode` ä¸­æœ‰ä¸€ä¸ªæ’ä»¶ `Import Cost` å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯¹å¼•å…¥æ¨¡å—çš„å¤§å°è¿›è¡Œå®æ—¶ç›‘æµ‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `webpack-bundle-analyzer` ç”Ÿæˆ `bundle` çš„æ¨¡å—ç»„æˆå›¾ï¼Œæ˜¾ç¤ºæ‰€å ä½“ç§¯ã€‚

`bundlesize` å·¥å…·åŒ…å¯ä»¥è¿›è¡Œè‡ªåŠ¨åŒ–èµ„æºä½“ç§¯ç›‘æ§ã€‚

## 10.æ–‡ä»¶æŒ‡çº¹æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ

æ–‡ä»¶æŒ‡çº¹æ˜¯æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶åçš„åç¼€ã€‚

- 
`Hash`ï¼šå’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼å°±ä¼šæ›´æ”¹

- 
`Chunkhash`ï¼šå’Œ Webpack æ‰“åŒ…çš„ chunk æœ‰å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿå‡ºä¸åŒçš„ chunkhash

- 
`Contenthash`ï¼šæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™ contenthash ä¸å˜


### JSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®

è®¾ç½® output çš„ filenameï¼Œç”¨ chunkhashã€‚

```
module.exports = {    entry: {        app: './scr/app.js',        search: './src/search.js'    },    output: {        filename: '[name][chunkhash:8].js',        path:__dirname + '/dist'    }}å¤åˆ¶ä»£ç 
```

### CSSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®

è®¾ç½® MiniCssExtractPlugin çš„ filenameï¼Œä½¿ç”¨ contenthashã€‚

```
module.exports = {    entry: {        app: './scr/app.js',        search: './src/search.js'    },    output: {        filename: '[name][chunkhash:8].js',        path:__dirname + '/dist'    },    plugins:[        new MiniCssExtractPlugin({            filename: `[name][contenthash:8].css`        })    ]}å¤åˆ¶ä»£ç 
```

### å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®

è®¾ç½®file-loaderçš„nameï¼Œä½¿ç”¨hashã€‚

å ä½ç¬¦åç§°åŠå«ä¹‰

- ext èµ„æºåç¼€å
- name æ–‡ä»¶åç§°
- path æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„
- folder æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹
- contenthash æ–‡ä»¶çš„å†…å®¹hashï¼Œé»˜è®¤æ˜¯md5ç”Ÿæˆ
- hash æ–‡ä»¶å†…å®¹çš„hashï¼Œé»˜è®¤æ˜¯md5ç”Ÿæˆ
- emoji ä¸€ä¸ªéšæœºçš„æŒ‡ä»£æ–‡ä»¶å†…å®¹çš„emoj

```
const path = require('path');module.exports = {    entry: './src/index.js',    output: {        filename:'bundle.js',        path:path.resolve(__dirname, 'dist')    },    module:{        rules:[{            test:/\.(png|svg|jpg|gif)$/,            use:[{                loader:'file-loader',                options:{                    name:'img/[name][hash:8].[ext]'                }            }]        }]    }}å¤åˆ¶ä»£ç 
```

## 11.åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸Šç™¾è¡Œä¹ƒæ˜¯å¸¸äº‹ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªloaderæŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œï¼Ÿ

å¯ä»¥ä½¿ç”¨ `enforce` å¼ºåˆ¶æ‰§è¡Œ `loader` çš„ä½œç”¨é¡ºåºï¼Œ`pre` ä»£è¡¨åœ¨æ‰€æœ‰æ­£å¸¸ loader ä¹‹å‰æ‰§è¡Œï¼Œ`post` æ˜¯æ‰€æœ‰ loader ä¹‹åæ‰§è¡Œã€‚(inline å®˜æ–¹ä¸æ¨èä½¿ç”¨)

## 12.å¦‚ä½•ä¼˜åŒ– Webpack çš„æ„å»ºé€Ÿåº¦ï¼Ÿ

(è¿™ä¸ªé—®é¢˜å°±åƒèƒ½ä¸èƒ½è¯´ä¸€è¯´**ã€Œä»URLè¾“å…¥åˆ°é¡µé¢æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆã€**ä¸€æ ·ï¼‰

(æˆ‘åªæƒ³è¯´ï¼šæ‚¨å¸Œæœ›æˆ‘è®²å¤šé•¿æ—¶é—´å‘¢ï¼Ÿ)

(é¢è¯•å®˜ï¼šã€‚ã€‚ã€‚)

- 
ä½¿ç”¨`é«˜ç‰ˆæœ¬`çš„ Webpack å’Œ Node.js

- 
`å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º`ï¼šHappyPack(ä¸ç»´æŠ¤äº†)ã€thread-loader

- 
`å‹ç¼©ä»£ç `

   - å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©

      - webpack-paralle-uglify-plugin
      - uglifyjs-webpack-plugin å¼€å¯ parallel å‚æ•° (ä¸æ”¯æŒES6)
      - terser-webpack-plugin å¼€å¯ parallel å‚æ•°
   - é€šè¿‡ mini-css-extract-plugin æå– Chunk ä¸­çš„ CSS ä»£ç åˆ°å•ç‹¬æ–‡ä»¶ï¼Œé€šè¿‡ css-loader çš„ minimize é€‰é¡¹å¼€å¯ cssnano å‹ç¼© CSSã€‚
- 
`å›¾ç‰‡å‹ç¼©`

   - ä½¿ç”¨åŸºäº Node åº“çš„ imagemin (å¾ˆå¤šå®šåˆ¶é€‰é¡¹ã€å¯ä»¥å¤„ç†å¤šç§å›¾ç‰‡æ ¼å¼)
   - é…ç½® image-webpack-loader
- 
`ç¼©å°æ‰“åŒ…ä½œç”¨åŸŸ`ï¼š

   - exclude/include (ç¡®å®š loader è§„åˆ™èŒƒå›´)
   - resolve.modules æŒ‡æ˜ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»å¯¹è·¯å¾„ (å‡å°‘ä¸å¿…è¦çš„æŸ¥æ‰¾)
   - resolve.mainFields åªé‡‡ç”¨ main å­—æ®µä½œä¸ºå…¥å£æ–‡ä»¶æè¿°å­—æ®µ (å‡å°‘æœç´¢æ­¥éª¤ï¼Œéœ€è¦è€ƒè™‘åˆ°æ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å—çš„å…¥å£æ–‡ä»¶æè¿°å­—æ®µ)
   - resolve.extensions å°½å¯èƒ½å‡å°‘åç¼€å°è¯•çš„å¯èƒ½æ€§
   - noParse å¯¹å®Œå…¨ä¸éœ€è¦è§£æçš„åº“è¿›è¡Œå¿½ç•¥ (ä¸å»è§£æä½†ä»ä¼šæ‰“åŒ…åˆ° bundle ä¸­ï¼Œæ³¨æ„è¢«å¿½ç•¥æ‰çš„æ–‡ä»¶é‡Œä¸åº”è¯¥åŒ…å« importã€requireã€define ç­‰æ¨¡å—åŒ–è¯­å¥)
   - IgnorePlugin (å®Œå…¨æ’é™¤æ¨¡å—)
   - åˆç†ä½¿ç”¨alias
- 
`æå–é¡µé¢å…¬å…±èµ„æº`ï¼š

   - åŸºç¡€åŒ…åˆ†ç¦»ï¼š

      - ä½¿ç”¨ html-webpack-externals-pluginï¼Œå°†åŸºç¡€åŒ…é€šè¿‡ CDN å¼•å…¥ï¼Œä¸æ‰“å…¥ bundle ä¸­
      - ä½¿ç”¨ SplitChunksPlugin è¿›è¡Œ(å…¬å…±è„šæœ¬ã€åŸºç¡€åŒ…ã€é¡µé¢å…¬å…±æ–‡ä»¶)åˆ†ç¦»(Webpack4å†…ç½®) ï¼Œæ›¿ä»£äº† CommonsChunkPlugin æ’ä»¶
- 
`DLL`ï¼š

   - ä½¿ç”¨ DllPlugin è¿›è¡Œåˆ†åŒ…ï¼Œä½¿ç”¨ DllReferencePlugin(ç´¢å¼•é“¾æ¥) å¯¹ manifest.json å¼•ç”¨ï¼Œè®©ä¸€äº›åŸºæœ¬ä¸ä¼šæ”¹åŠ¨çš„ä»£ç å…ˆæ‰“åŒ…æˆé™æ€èµ„æºï¼Œé¿å…åå¤ç¼–è¯‘æµªè´¹æ—¶é—´ã€‚
   - HashedModuleIdsPlugin å¯ä»¥è§£å†³æ¨¡å—æ•°å­—idé—®é¢˜
- 
`å……åˆ†åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦`ï¼š

   - babel-loader å¼€å¯ç¼“å­˜
   - terser-webpack-plugin å¼€å¯ç¼“å­˜
   - ä½¿ç”¨ cache-loader æˆ–è€… hard-source-webpack-plugin
- 
`Tree shaking`

   - æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰å¼•ç”¨è¿‡çš„æ¨¡å—å¹¶è¿›è¡Œæ ‡è®°ï¼Œåœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„bundleä¸­å»æ‰(åªèƒ½å¯¹ES6 Modlueç”Ÿæ•ˆ) å¼€å‘ä¸­å°½å¯èƒ½ä½¿ç”¨ES6 Moduleçš„æ¨¡å—ï¼Œæé«˜tree shakingæ•ˆç‡
   - ç¦ç”¨ babel-loader çš„æ¨¡å—ä¾èµ–è§£æï¼Œå¦åˆ™ Webpack æ¥æ”¶åˆ°çš„å°±éƒ½æ˜¯è½¬æ¢è¿‡çš„ CommonJS å½¢å¼çš„æ¨¡å—ï¼Œæ— æ³•è¿›è¡Œ tree-shaking
   - ä½¿ç”¨ PurifyCSS(ä¸åœ¨ç»´æŠ¤) æˆ–è€… uncss å»é™¤æ— ç”¨ CSS ä»£ç 

      - purgecss-webpack-plugin å’Œ mini-css-extract-pluginé…åˆä½¿ç”¨(å»ºè®®)
- 
`Scope hoisting`

   - æ„å»ºåçš„ä»£ç ä¼šå­˜åœ¨å¤§é‡é—­åŒ…ï¼Œé€ æˆä½“ç§¯å¢å¤§ï¼Œè¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ã€‚Scope hoisting å°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²æ­¢å˜é‡åå†²çª
   - å¿…é¡»æ˜¯ES6çš„è¯­æ³•ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä»é‡‡ç”¨ CommonJS è¯­æ³•ï¼Œä¸ºäº†å……åˆ†å‘æŒ¥ Scope hoisting çš„ä½œç”¨ï¼Œéœ€è¦é…ç½® mainFields å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—ä¼˜å…ˆé‡‡ç”¨ jsnext:main ä¸­æŒ‡å‘çš„ES6æ¨¡å—åŒ–è¯­æ³•
- 
`åŠ¨æ€Polyfill`

   - å»ºè®®é‡‡ç”¨ polyfill-service åªç»™ç”¨æˆ·è¿”å›éœ€è¦çš„polyfillï¼Œç¤¾åŒºç»´æŠ¤ã€‚ (éƒ¨åˆ†å›½å†…å¥‡è‘©æµè§ˆå™¨UAå¯èƒ½æ— æ³•è¯†åˆ«ï¼Œä½†å¯ä»¥é™çº§è¿”å›æ‰€éœ€å…¨éƒ¨polyfill)

æ›´å¤šä¼˜åŒ–è¯·å‚è€ƒ[å®˜ç½‘-æ„å»ºæ€§èƒ½](https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpackjs.com%2Fguides%2Fbuild-performance%2F)

## 13.ä½ åˆšæ‰ä¹Ÿæåˆ°äº†ä»£ç åˆ†å‰²ï¼Œé‚£ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ

ä»£ç åˆ†å‰²çš„æœ¬è´¨å…¶å®å°±æ˜¯åœ¨`æºä»£ç ç›´æ¥ä¸Šçº¿`å’Œ`æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬main.bundle.js`è¿™ä¸¤ç§æç«¯æ–¹æ¡ˆä¹‹é—´çš„ä¸€ç§æ›´é€‚åˆå®é™…åœºæ™¯çš„ä¸­é—´çŠ¶æ€ã€‚

`é˜¿å¡ä¸½ï¼šè£è€€å‰‘ä¸‹å–ï¼Œå‡è¡¡ä¹±ä¸­æ±‚`

**ã€Œç”¨å¯æ¥å—çš„æœåŠ¡å™¨æ€§èƒ½å‹åŠ›å¢åŠ æ¥æ¢å–æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ã€**

æºä»£ç ç›´æ¥ä¸Šçº¿ï¼šè™½ç„¶è¿‡ç¨‹å¯æ§ï¼Œä½†æ˜¯httpè¯·æ±‚å¤šï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚

æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬ï¼šä¸€æŠŠæ¢­å®Œè‡ªå·±çˆ½ï¼ŒæœåŠ¡å™¨å‹åŠ›å°ï¼Œä½†æ˜¯é¡µé¢ç©ºç™½æœŸé•¿ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚

(Easy peezy right)

## 14.æ˜¯å¦å†™è¿‡Loaderï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™loaderçš„æ€è·¯ï¼Ÿ

Loader æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥å¼€å‘ä¸Šéœ€è¦ä¸¥æ ¼éµå¾ªâ€œå•ä¸€èŒè´£â€ï¼Œæ¯ä¸ª Loader åªè´Ÿè´£è‡ªå·±éœ€è¦è´Ÿè´£çš„äº‹æƒ…ã€‚

[Loaderçš„API](https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpackjs.com%2Fapi%2Floaders%2F) å¯ä»¥å»å®˜ç½‘æŸ¥é˜…

- Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ Node.js è‡ªå¸¦çš„ API æˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨
- Webpack ä¼ ç»™ Loader çš„åŸå†…å®¹éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå½“æŸäº›åœºæ™¯ä¸‹ Loader å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ exports.raw = true å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®
- å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥
- Loader æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ Loader ä¸­ä¿ç•™çŠ¶æ€
- ä½¿ç”¨ loader-utils å’Œ schema-utils ä¸ºæˆ‘ä»¬æä¾›çš„å®ç”¨å·¥å…·
- åŠ è½½æœ¬åœ° Loader æ–¹æ³•

   - Npm link
   - ResolveLoader

## 15.æ˜¯å¦å†™è¿‡Pluginï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™Pluginçš„æ€è·¯ï¼Ÿ

webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨ç‰¹å®šçš„é˜¶æ®µé’©å…¥æƒ³è¦æ·»åŠ çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚Webpack çš„ Tapable äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§è‰¯å¥½ã€‚

[Pluginçš„API](https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpackjs.com%2Fapi%2Fplugins%2F) å¯ä»¥å»å®˜ç½‘æŸ¥é˜…

- compiler æš´éœ²äº†å’Œ Webpack æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­
- compilation æš´éœ²äº†ä¸æ¨¡å—å’Œä¾èµ–æœ‰å…³çš„ç²’åº¦æ›´å°çš„äº‹ä»¶é’©å­
- æ’ä»¶éœ€è¦åœ¨å…¶åŸå‹ä¸Šç»‘å®šapplyæ–¹æ³•ï¼Œæ‰èƒ½è®¿é—® compiler å®ä¾‹
- ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ compiler å’Œ compilationå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œè‹¥åœ¨ä¸€ä¸ªæ’ä»¶ä¸­ä¿®æ”¹äº†å®ƒä»¬èº«ä¸Šçš„å±æ€§ï¼Œä¼šå½±å“åé¢çš„æ’ä»¶
- æ‰¾å‡ºåˆé€‚çš„äº‹ä»¶ç‚¹å»å®Œæˆæƒ³è¦çš„åŠŸèƒ½

   - emit äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆè¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶è¿›è¡Œä¿®æ”¹(emit äº‹ä»¶æ˜¯ä¿®æ”¹ Webpack è¾“å‡ºèµ„æºçš„æœ€åæ—¶æœº)
   - watch-run å½“ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘
- å¼‚æ­¥çš„äº‹ä»¶éœ€è¦åœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ Webpack è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ï¼Œä¸ç„¶ä¼šå¡ä½

## 16.èŠä¸€èŠBabelåŸç†å§

å¤§å¤šæ•°JavaScript Parseréµå¾ª `estree` è§„èŒƒï¼ŒBabel æœ€åˆåŸºäº `acorn` é¡¹ç›®(è½»é‡çº§ç°ä»£ JavaScript è§£æå™¨) Babelå¤§æ¦‚åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼š

- è§£æï¼šå°†ä»£ç è½¬æ¢æˆ AST

   - è¯æ³•åˆ†æï¼šå°†ä»£ç (å­—ç¬¦ä¸²)åˆ†å‰²ä¸ºtokenæµï¼Œå³è¯­æ³•å•å…ƒæˆçš„æ•°ç»„
   - è¯­æ³•åˆ†æï¼šåˆ†ætokenæµ(ä¸Šé¢ç”Ÿæˆçš„æ•°ç»„)å¹¶ç”Ÿæˆ AST
- è½¬æ¢ï¼šè®¿é—® AST çš„èŠ‚ç‚¹è¿›è¡Œå˜æ¢æ“ä½œç”Ÿäº§æ–°çš„ AST

   - [Taro](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FNervJS%2Ftaro%2Fblob%2Fmaster%2Fpackages%2Ftaro-transformer-wx%2Fsrc%2Findex.ts%23L15)å°±æ˜¯åˆ©ç”¨ babel å®Œæˆçš„å°ç¨‹åºè¯­æ³•è½¬æ¢
- ç”Ÿæˆï¼šä»¥æ–°çš„ AST ä¸ºåŸºç¡€ç”Ÿæˆä»£ç 

æƒ³äº†è§£å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å®ç°ä¸€ä¸ªç¼–è¯‘å™¨çš„åŒå­¦å¯ä»¥ç§»æ­¥ Babel å®˜ç½‘æ›¾ç»æ¨èçš„å¼€æºé¡¹ç›® [the-super-tiny-compiler](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fjamiebuilds%2Fthe-super-tiny-compiler)

> â

> é¢è¯•å®˜ï¼š(æˆ‘å¬çš„å£æ¸´äº†ï¼Œå’±ä»¬ä¼‘æ¯ä¸€ä¼šï¼Œä¸€ä¼šè¿›è¡Œä¸‹åŠåœº)

> â


é¢è¯•å®˜æ‹¿èµ·æ—è¾¹å·²ç»å‡‰é€çš„é¾™äº•ï¼Œå–äº†ä¸€å£ã€‚

(è¿™å°ä¼™å­æœ‰ç‚¹ä¸œè¥¿)

**ã€ŒæŒç»­æ›´æ–°â€¦â€¦ã€**

## å‚è€ƒ

- 
æ·±å…¥æµ…å‡º Webpack

- 
Webpack å®æˆ˜

- 
ç©è½¬ Webpack


## â¤ï¸çˆ±å¿ƒä¸‰è¿å‡»

1.çœ‹åˆ°è¿™é‡Œäº†å°±ç‚¹ä¸ªåœ¨çœ‹æ”¯æŒä¸‹å§ï¼Œä½ çš„**ã€Œåœ¨çœ‹ã€**æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ã€‚

2.å…³æ³¨å…¬ä¼—å·`å‰ç«¯é£Ÿå ‚`ï¼Œ**ã€Œä½ çš„å‰ç«¯é£Ÿå ‚ï¼Œè®°å¾—æŒ‰æ—¶åƒé¥­ã€**ï¼

3. [github.com/Geekhyt](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGeekhyt%2Ffront-end-canteen%2F)ï¼Œæ„Ÿè°¢Starã€‚

![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/14/1734dc49202b4582~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp#alt=)
