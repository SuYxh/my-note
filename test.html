<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.js"></script>
  <style>
    body {
      height: 200vh;
    }
  </style>
</head>

<body>
  <script>
    const arr = [
      { id: 2, name: '部门B', parentId: 1 },
      { id: 3, name: '部门C', parentId: 1 },
      { id: 4, name: '部门D', parentId: 2 },
      { id: 5, name: '部门E', parentId: 2 },
      { id: 1, name: '部门A', parentId: 0 },
      { id: 6, name: '部门F', parentId: 3 },
    ]
    
    function TreeNode(id, name) {
      this.id = id
      this.name = name
      this.children = []
    }
  
    function arrTotree(arr) {
      let tree = null
      const map = new Map()

      arr.forEach(({id, name}) => {
        map.set(id, new TreeNode(id, name))
      });


      arr.forEach(({id, name, parentId}) => {
        const node = map.get(id)
        if (parentId === 0) {
          tree = node
        } else {
          const parentNode = map.get(parentId)
          if (parentNode) {
            parentNode.children.push(node)
          }
        }
      })

      return tree
    }

    // const tree = arrTotree(arr)
    // console.log(tree);


    function treeToarr(tree) {
      const arr = []

      const dfs = (root, parentNode) => {
        arr.push({ id: root.id, name: root.name, parentId: parentNode?.id || 0 })

        if (root.children.length) {
          root.children.forEach(item => dfs(item, root))
        }
      }


      dfs(tree, null)

      return arr
    }

    // setTimeout(() => {
    //   const arr1 = treeToarr(tree)
    //   console.log(arr1); 
    // }, 1000);

    function binarySearch(arr, target) {
      let left = 0
      let right = arr.length - 1

      while (left <= right) {
        const mid = Math.floor((left + right) / 2)
        const midVal = arr[mid]

        if (midVal === target) {
          return mid
        }

        if (midVal > target) {
          right = mid -1
        } else {
          left = mid + 1
        }
      }

      return -1
    }

    let sortedArray = [1, 2, 3, 4, 5, 6, 7, 8, 9];
console.log(binarySearch(sortedArray, 5)); // 输出：4
  </script>
</body>

</html>