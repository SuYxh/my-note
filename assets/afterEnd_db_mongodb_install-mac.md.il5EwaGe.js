import{_ as s,c as a,o as i,V as n}from"./chunks/framework.hxTji2_l.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"afterEnd/db/mongodb/install-mac.md","filePath":"afterEnd/db/mongodb/install-mac.md","lastUpdated":1720969341000}'),e={name:"afterEnd/db/mongodb/install-mac.md"},l=n(`<p>文章内容参考自菜鸟教程：<a href="https://www.runoob.com/mongodb/mongodb-osx-install.html" target="_blank" rel="noreferrer">相关链接</a>。只是本人在安装时，对一些必要步骤进行了截图，以便更加明了清晰。同时，也指出了可能会踩到的一些坑。</p><h2 id="第一步-安装方法" tabindex="-1">第一步：安装方法 <a class="header-anchor" href="#第一步-安装方法" aria-label="Permalink to &quot;第一步：安装方法&quot;">​</a></h2><h3 id="mongodb-官网下载安装包" tabindex="-1">MongoDB 官网下载安装包 <a class="header-anchor" href="#mongodb-官网下载安装包" aria-label="Permalink to &quot;MongoDB 官网下载安装包&quot;">​</a></h3><ol><li>点击官网<a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noreferrer">下载地址</a></li></ol><p><img src="https://qn.huat.xyz/mac/202310242107655.awebp" alt="截屏2022-01-13 11.12.53.png"></p><p>如图，点击<strong>Download</strong>下载按钮即可，其配置选项会根据用户笔记本系统自行选择，默认就行。</p><ol start="2"><li>将下载好的 MongoDB 安装包解压缩，并将文件夹名改为 mongodb（可改成自己想要的任何名字）。</li></ol><p><img src="https://qn.huat.xyz/mac/202310242107422.awebp" alt="截屏2022-01-13 11.19.47.png"></p><p><img src="https://qn.huat.xyz/mac/202310242107294.awebp" alt="截屏2022-01-13 11.34.58.png"></p><ol start="3"><li>按快捷键 <em>Command + Shift + G</em> 打开<em>前往文件夹</em>弹窗，然后输入路径： /usr/local，并点击前往按钮。</li></ol><p><img src="https://qn.huat.xyz/mac/202310242107016.awebp" alt="截屏2022-01-13 11.45.18.png"></p><ol start="4"><li>将 mongodb 文件夹拖入 local 文件夹中，自此安装完成。</li></ol><p><img src="https://qn.huat.xyz/mac/202310242107035.awebp" alt="截屏2022-01-13 11.52.45.png"></p><h3 id="在终端使用-curl-命令来下载安装" tabindex="-1">在终端使用 curl 命令来下载安装 <a class="header-anchor" href="#在终端使用-curl-命令来下载安装" aria-label="Permalink to &quot;在终端使用 curl 命令来下载安装&quot;">​</a></h3><ol><li>进入 /usr/local</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>cd /usr/local</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>下载</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo curl -O https://fastdl.mongodb.org/osx/mongodb-macos-x86_64-5.0.5.tgz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>解压</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo tar -zxvf mongodb-macos-x86_64-5.0.5.tgz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>重命名为 mongodb 目录</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo mv mongodb-macos-x86_64-5.0.5/ mongodb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>当然，大家若是安装了<strong>HomeBrew</strong>，也可以通过 brew 命令来安装 mongodb，这里就不细说了，感兴趣的小伙伴可以自行百度了解。</p><h2 id="第二步-配置-moogodb-环境变量" tabindex="-1">第二步： 配置 moogodb 环境变量 <a class="header-anchor" href="#第二步-配置-moogodb-环境变量" aria-label="Permalink to &quot;第二步： 配置 moogodb 环境变量&quot;">​</a></h2><ol><li><p>打开终端，输入命令：<code>cd ~</code> 到当前用户的家目录。</p></li><li><p>打开 .zshrc 文件：<code>open ~/.zshrc</code>，若没有此文件，就创建一个：<code>touch .zshrc</code>。</p><p>注意你当前使用的 mac 终端是 bash 还是 zsh。</p><ul><li>bash 使用 .bash_profile 文件</li><li>zsh 使用 .zshrc 文件</li></ul></li><li><p>把 MongoDB 的二进制命令文件目录（安装目录/bin）添加到 PATH 路径中。</p></li></ol><p>变量如下：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>export PATH=/usr/local/mongodb/bin:$PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>将变量添加到文件中：</p><p><img src="https://qn.huat.xyz/mac/202310242107232.awebp" alt="截屏2022-01-13 14.12.12.png"></p><ol start="4"><li>使用命令 <code>source ~/.zshrc</code> 使配置生效。</li></ol><h2 id="第三步-创建日志及数据存放的目录" tabindex="-1">第三步：创建日志及数据存放的目录 <a class="header-anchor" href="#第三步-创建日志及数据存放的目录" aria-label="Permalink to &quot;第三步：创建日志及数据存放的目录&quot;">​</a></h2><ul><li>数据存放路径</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo mkdir -p /usr/local/var/mongodb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>日志文件路径</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo mkdir -p /usr/local/var/log/mongodb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>确保当前用户对以上两个目录有读写的权限</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sudo chown xxx /usr/local/var/mongodb</span></span>
<span class="line"><span>sudo chown xxx /usr/local/var/log/mongodb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>xxx 表示你电脑上的当前用户。</p><h2 id="第五步-在后台启动-mongodb" tabindex="-1">第五步：在后台启动 mongodb <a class="header-anchor" href="#第五步-在后台启动-mongodb" aria-label="Permalink to &quot;第五步：在后台启动 mongodb&quot;">​</a></h2><ul><li><em>--dbpath</em>  表示设置数据存放目录</li><li><em>--logpath</em>  表示设置日志存放目录</li><li><em>--fork</em> 表示在后台运行</li></ul><ol><li>命令启动（每次开机都要输入下面这一长串的命令启动 mongodb，一点也不方便）</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>配置文件启动（谁不喜欢这种简便的方式呢）</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>mongod --config /usr/local/etc/mongod.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>通过设置配置文件启动 mongodb，需要你先创建一个文件 mongod.conf，然后在文件中写入配置。具体步骤如下：</p><ol><li>打开终端，切换到 /usr/local/etc 在文件夹下</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>cd /usr/local/etc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建 mongod.conf 文件</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>touch mongod.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>编辑配置文件 mongod.conf</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>vim /usr/local/etc/mongod.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>写入如下配置：</p><p><img src="https://qn.huat.xyz/mac/202310242107826.awebp" alt="截屏2022-01-17 14.43.12.png"></p><p>配置完成，以后再也不用输入一大串命令了。</p><h2 id="第六步-连接-mongodb" tabindex="-1">第六步：连接 mongodb <a class="header-anchor" href="#第六步-连接-mongodb" aria-label="Permalink to &quot;第六步：连接 mongodb&quot;">​</a></h2><p>在终端输入命令：<code>mongo</code>，出现如下图字样，即说明连接服务成功。</p><p><img src="https://qn.huat.xyz/mac/202310242107465.awebp" alt="截屏2022-01-13 14.35.03.png"></p><p>或者直接使用代码链接</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mongoose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mongoose&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mongoose.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mongodb://localhost:27017/app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;数据库启动失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;数据库启动成功&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(port);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, onError);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;listening&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, onListening);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="补充" tabindex="-1">补充 <a class="header-anchor" href="#补充" aria-label="Permalink to &quot;补充&quot;">​</a></h2><p>我们在操作 <strong>MongoDB</strong> 数据库时，若需要对数据进行备份(mongodump)或恢复(mongorestore)，则需要去官网下载 <a href="https://www.mongodb.com/try/download/relational-migrator" target="_blank" rel="noreferrer">MongoDB 数据库工具</a>。安装过程也很简单，就是将下载好的工具包解压缩，然后将里面的文件复制到你所安装的 mongodb 的 bin 目录下即可。</p>`,61),p=[l];function t(o,r,d,h,c,g){return i(),a("div",null,p)}const m=s(e,[["render",t]]);export{b as __pageData,m as default};
