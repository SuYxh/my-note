import{_ as s,c as a,o as n,V as e}from"./chunks/framework.hxTji2_l.js";const d=JSON.parse('{"title":"whistle","description":"","frontmatter":{},"headers":[],"relativePath":"tools/whistle.md","filePath":"tools/whistle.md","lastUpdated":1716030485000}'),p={name:"tools/whistle.md"},l=e(`<h1 id="whistle" tabindex="-1">whistle <a class="header-anchor" href="#whistle" aria-label="Permalink to &quot;whistle&quot;">​</a></h1><p>官网： <a href="http://wproxy.org/whistle/" target="_blank" rel="noreferrer">http://wproxy.org/whistle/</a></p><h2 id="一、基础教程" tabindex="-1">一、基础教程 <a class="header-anchor" href="#一、基础教程" aria-label="Permalink to &quot;一、基础教程&quot;">​</a></h2><ol><li>Whistle 是什么及本地安装</li></ol><p><a href="https://juejin.cn/post/6844904167396343815" target="_blank" rel="noreferrer">https://juejin.cn/post/6844904167396343815</a></p><ol start="2"><li>Whistle 之简单使用</li></ol><p><a href="https://juejin.cn/post/6844904167408943111" target="_blank" rel="noreferrer">https://juejin.cn/post/6844904167408943111</a></p><ol start="3"><li>Whistle 项目配置文件</li></ol><p><a href="https://juejin.cn/post/6844904167400554510" target="_blank" rel="noreferrer">https://juejin.cn/post/6844904167400554510</a></p><ol start="4"><li>Whistle 移动端调试</li></ol><p><a href="https://juejin.cn/post/6844904167857717262" target="_blank" rel="noreferrer">https://juejin.cn/post/6844904167857717262</a></p><h2 id="二、进阶教程" tabindex="-1">二、进阶教程 <a class="header-anchor" href="#二、进阶教程" aria-label="Permalink to &quot;二、进阶教程&quot;">​</a></h2><h3 id="常用功能" tabindex="-1">常用功能 <a class="header-anchor" href="#常用功能" aria-label="Permalink to &quot;常用功能&quot;">​</a></h3><ol><li>设置请求 host 代理</li><li>设置 http 转 https</li><li>抓取 HTTP、HTTPS 请求响应内容</li><li>过滤不需要的 url</li><li>支持替换本地文件</li><li>支持修改接口返回数据</li><li>内置调试移动端页面的 weinre 和 log 及扩展 eruda 和 vConsole</li><li>修改请求 url、方法、头部、内容及响应状态码、头部、内容等</li></ol><h3 id="安装启动" tabindex="-1">安装启动 <a class="header-anchor" href="#安装启动" aria-label="Permalink to &quot;安装启动&quot;">​</a></h3><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm install -g whistle</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="启动" tabindex="-1">启动 <a class="header-anchor" href="#启动" aria-label="Permalink to &quot;启动&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 启动</span></span>
<span class="line"><span>w2 start</span></span>
<span class="line"><span># 重启</span></span>
<span class="line"><span>w2 restart</span></span>
<span class="line"><span># 停止</span></span>
<span class="line"><span>w2 stop</span></span>
<span class="line"><span># 调试运行，插件开发调试时使用</span></span>
<span class="line"><span>w2 run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="界面介绍" tabindex="-1">界面介绍 <a class="header-anchor" href="#界面介绍" aria-label="Permalink to &quot;界面介绍&quot;">​</a></h3><p>启动后，进入配置页面</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>http://127.0.0.1:8899/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>界面介绍： <a href="http://wproxy.org/whistle/webui/" target="_blank" rel="noreferrer">http://wproxy.org/whistle/webui/</a></p><h3 id="代理安装" tabindex="-1">代理安装 <a class="header-anchor" href="#代理安装" aria-label="Permalink to &quot;代理安装&quot;">​</a></h3><h4 id="chrome-代理设置" tabindex="-1">Chrome 代理设置 <a class="header-anchor" href="#chrome-代理设置" aria-label="Permalink to &quot;Chrome 代理设置&quot;">​</a></h4><p>安装 Chrome 代理插件：推荐安装 SwitchyOmega</p><p>备用下载地址：<a href="https://github.com/FelisCatus/SwitchyOmega/releases" target="_blank" rel="noreferrer">https://github.com/FelisCatus/SwitchyOmega/releases</a></p><p><img src="https://qn.huat.xyz/mac/202308231658098.png" alt="img"></p><p>当访问需要代理页面时，具体操作如下图</p><p><img src="https://qn.huat.xyz/mac/202308231658005.gif" alt="img"></p><p>具体操作：</p><p>点击 SwitchyOmega → 点击 zhuanzhuan.com → whistle</p><p>刷新页面</p><p>找到其他红色被安全设置拦截的连接 → 继续访问</p><p>注意：所有通过 SwitchyOmega 代理的域名都会出现这个，继续访问就好</p><p><a href="http://wproxy.org/whistle/install.html" target="_blank" rel="noreferrer">更多配置代理方法</a></p><h4 id="safari-代理设置" tabindex="-1">Safari 代理设置 <a class="header-anchor" href="#safari-代理设置" aria-label="Permalink to &quot;Safari 代理设置&quot;">​</a></h4><p>Safari 使用的是系统代理，直接在系统代理中配置指向 <code>127.0.0.1:8899</code> 即可</p><h4 id="https-设置" tabindex="-1">Https 设置 <a class="header-anchor" href="#https-设置" aria-label="Permalink to &quot;Https 设置&quot;">​</a></h4><p><img src="https://qn.huat.xyz/mac/202308231659765.png" alt="img"></p><p><strong>注意</strong>：Capture HTTPS CONNECTs 一定要勾上，否则抓不到 https 的包</p><p><a href="http://wproxy.org/whistle/webui/https.html" target="_blank" rel="noreferrer">更多 Https 配置</a></p><h3 id="常用匹配规则" tabindex="-1">常用匹配规则 <a class="header-anchor" href="#常用匹配规则" aria-label="Permalink to &quot;常用匹配规则&quot;">​</a></h3><h4 id="类-host-配置形式" tabindex="-1">类 host 配置形式 <a class="header-anchor" href="#类-host-配置形式" aria-label="Permalink to &quot;类 host 配置形式&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 一、Host</span></span>
<span class="line"><span># 1.1 host</span></span>
<span class="line"><span>#127.0.0.1:8081 m.zhuanzhuan.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 1.2 组合模式</span></span>
<span class="line"><span>#192.168.187.2 m.zhuanzhuan.58.com m.zhuanzhuan.com s1.zhuanstatic.com img1.zhuanstatic.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 二、 匹配模式 - 域名、路径、正则、精确匹配、通配符匹配 - 注意：如果operatorURI不为请求路径，pattern和operatorURI位置可以调换</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2.1 域名匹配 - http、https、ws、wss，tunnel</span></span>
<span class="line"><span>#127.0.0.1:3000 app.zhuanzhuan.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2.2 http→https</span></span>
<span class="line"><span>#127.0.0.1:8081 https://m.zhuanzhuan.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2.3 路径匹配</span></span>
<span class="line"><span>#192.168.187.2 m.zhuanzhuan.com/Mzhuanzhuan/</span></span>
<span class="line"><span>#192.168.171.123 m.zhuanzhuan.com/platform</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2.4 正则匹配</span></span>
<span class="line"><span>#/Mzhuanzhuan/ 192.168.187.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2.5 通配符</span></span>
<span class="line"><span># http://*.com/abc/efg file:///User/xxx/test</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 三、请求转发</span></span>
<span class="line"><span>#m.zhuanzhuan.58.com m.zhuanzhuan.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 四、本地替换</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com file://E:\\test-whistle.html</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 五、Key-Value</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com file://{index.html}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 六、注入-插入到body底部</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com html://E:\\xx\\test\\test.html</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com js://E:\\xx\\test\\test.js</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com css://E:\\xx\\test\\test.css</span></span>
<span class="line"><span>#www.baidu.com html://{vConsole.html}</span></span>
<span class="line"><span>#www.baidu.com js://{test.js}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 七、远程注入Log-插入到head顶部</span></span>
<span class="line"><span>#www.baidu.com log://{log.js}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 八、调式Winer+自定义vConsole和eruda  注意：winer和vConsole不能同时开启</span></span>
<span class="line"><span>#m.zhuanzhuan.com weinre://test</span></span>
<span class="line"><span>#www.baidu.com log://{vConsole.js}</span></span>
<span class="line"><span>#www.baidu.com log://{eruda.js}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 九、修改数据</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.1 修改请求头</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com reqHeaders://{req-headers}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.2 修改响应头</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com resHeaders://{res-cors}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.3 设置CORS</span></span>
<span class="line"><span># 方法一</span></span>
<span class="line"><span>#/unionarticledetail/ resCors://{resCors}</span></span>
<span class="line"><span># 方法二</span></span>
<span class="line"><span>#/unionarticledetail/ resHeaders://{res-cors}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.4 模拟jsonp数据</span></span>
<span class="line"><span>#https://m.zhuanzhuan.com xtpl://{res-jsonp}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.5 模拟json数据</span></span>
<span class="line"><span>#/getverificationcode/ resCors://{resCORS}  # // 开启跨域允许get，post请求</span></span>
<span class="line"><span>#/getverificationcode/ xtpl://{jsonp.json}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.6 修改json数据-merge方法</span></span>
<span class="line"><span>#/getverificationcode/ resHeaders://{res-cors}</span></span>
<span class="line"><span>#/getverificationcode/ resMerge://{jsonp.json}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.7 修改json数据-replace方法</span></span>
<span class="line"><span>#/getverificationcode/ resReplace://{res-replace.json}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 9.8 通过插件whistle.vase模拟数据 - 支持模拟html(ejs等多模板)及json数据</span></span>
<span class="line"><span># 9.8.1 模拟随机对象</span></span>
<span class="line"><span># vase://random-data /getverificationcode/</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 其中random-data是插件规则文件名</span></span>
<span class="line"><span># 规则内容写法</span></span>
<span class="line"><span># out(random(</span></span>
<span class="line"><span>#    {&quot;test&quot;: &#39;000&#39;},</span></span>
<span class="line"><span>#    {&quot;test&quot;: &#39;111&#39;},</span></span>
<span class="line"><span>#    {&quot;test&quot;: &#39;222&#39;},</span></span>
<span class="line"><span>#    {&quot;test&quot;: &#39;333&#39;}</span></span>
<span class="line"><span># ), 1000);</span></span>
<span class="line"><span># 或者直接使用js</span></span>
<span class="line"><span># var rand = Math.random();</span></span>
<span class="line"><span># out({&quot;test&quot;: rand},1000);</span></span>
<span class="line"><span># 延时一秒后随机输出一个对象  更多使用方法移步https://github.com/whistle-plugins/whistle.vase</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><h4 id="过滤" tabindex="-1">过滤 <a class="header-anchor" href="#过滤" aria-label="Permalink to &quot;过滤&quot;">​</a></h4><p>可以同时匹配 url、请求响应头、请求方法、响应状态码、ClientIP 及 ServerIP、请求响应内容</p><p><strong>位置：</strong></p><p>图形界面 → Network → Settings → Filter</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>zhuanzhuan.com</span></span>
<span class="line"><span>zhuanstatic.com</span></span>
<span class="line"><span>58cdn.com.cn</span></span>
<span class="line"><span>58.com</span></span>
<span class="line"><span>127.0.0.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="http://wproxy.org/whistle/webui/settings.html" target="_blank" rel="noreferrer">详细过滤规则</a></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>api.juejin.cn style://color=@fff&amp;fontStyle=italic&amp;bgColor=red</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/202310261542904.awebp" alt="image.png"></p><h4 id="配置导入" tabindex="-1">配置导入 <a class="header-anchor" href="#配置导入" aria-label="Permalink to &quot;配置导入&quot;">​</a></h4><p>1、下载规则及其他配置文件</p><p><a href="https://gitee.com/ironc/whistle" target="_blank" rel="noreferrer">配置文件.zip</a></p><p>2、导入方法</p><p>导入规则</p><p><img src="https://qn.huat.xyz/mac/202308231706777.png" alt="img"></p><p>导入 value</p><p><img src="https://qn.huat.xyz/mac/202308231706984.png" alt="img"></p><p>导入 vase 规则</p><p><img src="https://qn.huat.xyz/mac/202308231707261.png" alt="img"></p><h3 id="补充" tabindex="-1">补充 <a class="header-anchor" href="#补充" aria-label="Permalink to &quot;补充&quot;">​</a></h3><h4 id="关闭-chrome-不安全提示" tabindex="-1">关闭 Chrome 不安全提示 <a class="header-anchor" href="#关闭-chrome-不安全提示" aria-label="Permalink to &quot;关闭 Chrome 不安全提示&quot;">​</a></h4><p>chrome → 设置 → 高级 → 管理证书 → 受信任的根证书颁发机构 → 导入</p><p><img src="https://qn.huat.xyz/mac/202308231701004.png" alt="img"></p><p><img src="https://qn.huat.xyz/mac/202308231701688.png" alt="img"></p><p>相关文件： <a href="https://gitee.com/ironc/whistle" target="_blank" rel="noreferrer">https://gitee.com/ironc/whistle</a></p><h2 id="三、技巧汇总" tabindex="-1">三、技巧汇总 <a class="header-anchor" href="#三、技巧汇总" aria-label="Permalink to &quot;三、技巧汇总&quot;">​</a></h2><table><thead><tr><th style="text-align:left;">方案</th><th style="text-align:left;">效果</th><th style="text-align:left;">提供人</th></tr></thead><tbody><tr><td style="text-align:left;">安装插件<a href="https://github.com/whistle-plugins/whistle.inspect" target="_blank" rel="noreferrer">inspect</a>，配置规则<a href="http://m.zhuanzhuan.com/" target="_blank" rel="noreferrer">m.zhuanzhuan.com</a> whistle.inspect://e 就能自动注入 eruda</td><td style="text-align:left;">自动注入 eruda 或者 vConsole 方便调试页面</td><td style="text-align:left;">黄家兴</td></tr><tr><td style="text-align:left;">部分路径配置 host，配置规则 127.0.0.1:8000 <a href="http://performance.zhuanspirit.com/" target="_blank" rel="noreferrer">p.zhuanspirit.com</a> excludeFilter://*/api</td><td style="text-align:left;">指定了该地址访问的 ip 与端口，但是剔除了类似 p.zhuanspirit.com/api/xxx 等路径。适合前后端都部署在一个域名但是需要访问不同的 ip 和端口的情况</td><td style="text-align:left;">黄家兴</td></tr></tbody></table><h2 id="四、whistle-功能一览" tabindex="-1">四、whistle 功能一览 <a class="header-anchor" href="#四、whistle-功能一览" aria-label="Permalink to &quot;四、whistle 功能一览&quot;">​</a></h2><p><img src="https://qn.huat.xyz/mac/202308231648982.png" alt="whistle"></p>`,73),r=[l];function t(i,c,h,o,b,u){return n(),a("div",null,r)}const g=s(p,[["render",t]]);export{d as __pageData,g as default};
