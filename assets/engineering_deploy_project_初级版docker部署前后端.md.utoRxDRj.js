import{_ as a,c as s,o as e,V as n}from"./chunks/framework.hxTji2_l.js";const b=JSON.parse('{"title":"umi-egg-docker-deploy-demo","description":"","frontmatter":{},"headers":[],"relativePath":"engineering/deploy/project/初级版docker部署前后端.md","filePath":"engineering/deploy/project/初级版docker部署前后端.md","lastUpdated":1712056354000}'),i={name:"engineering/deploy/project/初级版docker部署前后端.md"},p=n(`<h1 id="umi-egg-docker-deploy-demo" tabindex="-1">umi-egg-docker-deploy-demo <a class="header-anchor" href="#umi-egg-docker-deploy-demo" aria-label="Permalink to &quot;umi-egg-docker-deploy-demo&quot;">​</a></h1><p>使用 docker 进行前后端部署--初级班，后续会更新</p><h2 id="环境准备" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备" aria-label="Permalink to &quot;环境准备&quot;">​</a></h2><p>1、准备一台 centos</p><p>2、代码 <a href="https://github.com/SuYxh/umi-egg-docker-deploy-demo" target="_blank" rel="noreferrer">https://github.com/SuYxh/umi-egg-docker-deploy-demo</a></p><h2 id="安装软件" tabindex="-1">安装软件 <a class="header-anchor" href="#安装软件" aria-label="Permalink to &quot;安装软件&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>yum install yum-utils device-mapper-persistent-data lvm2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="设置启动-docker" tabindex="-1">设置启动 docker <a class="header-anchor" href="#设置启动-docker" aria-label="Permalink to &quot;设置启动 docker&quot;">​</a></h2><blockquote><p><a href="https://hub.daocloud.io/" target="_blank" rel="noreferrer">https://hub.daocloud.io/</a></p><p><a href="https://hub.docker.com/" target="_blank" rel="noreferrer">https://hub.docker.com/</a></p></blockquote><h3 id="_1、设置-docker-镜像源" tabindex="-1">1、设置 docker 镜像源 <a class="header-anchor" href="#_1、设置-docker-镜像源" aria-label="Permalink to &quot;1、设置 docker 镜像源&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2、启动-docker-服务" tabindex="-1">2、启动 docker 服务 <a class="header-anchor" href="#_2、启动-docker-服务" aria-label="Permalink to &quot;2、启动 docker 服务&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl start docker</span></span>
<span class="line"><span>systemctl enable docker  [开机自启]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：</strong> 注意： 若报错 <code>Failed to start docker.service: Unit not found.</code> ,则执行： <code>yum install docker-ce docker-ce-cli containerd.io</code>   后再启动 <code>systemctl start docker</code> ，查看相关信息 <code>ps -ef|grep docker</code></p><h3 id="_3、修改-docker-镜像源" tabindex="-1">3、修改 docker 镜像源 <a class="header-anchor" href="#_3、修改-docker-镜像源" aria-label="Permalink to &quot;3、修改 docker 镜像源&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>vi /etc/docker/daemon.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>填写以下内容：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>&quot;registry-mirrors&quot;: [&quot;https://register.docker-cn.com/&quot;]</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>输入完成后， 按 esc 退出， 然后输入 wq!</p><h3 id="_4、重新启动服务和-docker" tabindex="-1">4、重新启动服务和 docker <a class="header-anchor" href="#_4、重新启动服务和-docker" aria-label="Permalink to &quot;4、重新启动服务和 docker&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl daemon-reload</span></span>
<span class="line"><span>systemctl restart docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="制作-mysql-容器" tabindex="-1">制作 mysql 容器 <a class="header-anchor" href="#制作-mysql-容器" aria-label="Permalink to &quot;制作 mysql 容器&quot;">​</a></h2><h3 id="_1、拉取-mysql-镜像" tabindex="-1">1、拉取 mysql 镜像 <a class="header-anchor" href="#_1、拉取-mysql-镜像" aria-label="Permalink to &quot;1、拉取 mysql 镜像&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker pull daocloud.io/library/mysql:8.0.20</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328131735.png#id=MDOUG&amp;originHeight=626&amp;originWidth=1130&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_2、查看镜像" tabindex="-1">2、查看镜像 <a class="header-anchor" href="#_2、查看镜像" aria-label="Permalink to &quot;2、查看镜像&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker images</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328131531.png#id=qBxoc&amp;originHeight=138&amp;originWidth=1106&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_3、启动-mysql-容器" tabindex="-1">3、启动 mysql 容器 <a class="header-anchor" href="#_3、启动-mysql-容器" aria-label="Permalink to &quot;3、启动 mysql 容器&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker run -d -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD=yxh1998426 be0dbf01a0f3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328131639.png#id=qfNDm&amp;originHeight=144&amp;originWidth=1128&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_4、查看容器是否正常运行" tabindex="-1">4、查看容器是否正常运行 <a class="header-anchor" href="#_4、查看容器是否正常运行" aria-label="Permalink to &quot;4、查看容器是否正常运行&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker ps</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328131701.png#id=f5ukQ&amp;originHeight=202&amp;originWidth=1128&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="制作-redis-容器" tabindex="-1">制作 redis 容器 <a class="header-anchor" href="#制作-redis-容器" aria-label="Permalink to &quot;制作 redis 容器&quot;">​</a></h2><h3 id="_1、拉取-redis-镜像" tabindex="-1">1、拉取 redis 镜像 <a class="header-anchor" href="#_1、拉取-redis-镜像" aria-label="Permalink to &quot;1、拉取 redis 镜像&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker pull daocloud.io/library/redis:6.0.3-alpine3.11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328131938.png#id=uA8GO&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_2、查看镜像-1" tabindex="-1">2、查看镜像 <a class="header-anchor" href="#_2、查看镜像-1" aria-label="Permalink to &quot;2、查看镜像&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker images</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328132106.png#id=iPIQT&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_3、启动-redis-容器" tabindex="-1">3、启动 redis 容器 <a class="header-anchor" href="#_3、启动-redis-容器" aria-label="Permalink to &quot;3、启动 redis 容器&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker run -d -p 6379:6379 --name redis 29c713657d31 --requirepass yxh1998426</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328132209.png#id=DOdH3&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_4、查看容器是否正常运行-1" tabindex="-1">4、查看容器是否正常运行 <a class="header-anchor" href="#_4、查看容器是否正常运行-1" aria-label="Permalink to &quot;4、查看容器是否正常运行&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker ps</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328132233.png#id=slN5h&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_5、测试-redis" tabindex="-1">5、测试 redis <a class="header-anchor" href="#_5、测试-redis" aria-label="Permalink to &quot;5、测试 redis&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>// 进入redis容器</span></span>
<span class="line"><span>docker exec -it 52b7f797c564 sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 进入 redis</span></span>
<span class="line"><span>redis-cli -a yxh1998426</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328132633.png#id=bU11P&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="制作-nginx-容器" tabindex="-1">制作 nginx 容器 <a class="header-anchor" href="#制作-nginx-容器" aria-label="Permalink to &quot;制作 nginx 容器&quot;">​</a></h2><h3 id="_1、拉取-nginx-镜像" tabindex="-1">1、拉取 nginx 镜像 <a class="header-anchor" href="#_1、拉取-nginx-镜像" aria-label="Permalink to &quot;1、拉取 nginx 镜像&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker pull daocloud.io/library/nginx:1.13.0-alpine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328185853.png#id=DaD4Q&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_2、配置-nginx" tabindex="-1">2、配置 nginx <a class="header-anchor" href="#_2、配置-nginx" aria-label="Permalink to &quot;2、配置 nginx&quot;">​</a></h3><p>见代码的 <code>nginx</code> 文件夹</p><h3 id="_3、将-nginx-配置传到服务器" tabindex="-1">3、将 nginx 配置传到服务器 <a class="header-anchor" href="#_3、将-nginx-配置传到服务器" aria-label="Permalink to &quot;3、将 nginx 配置传到服务器&quot;">​</a></h3><blockquote><p>在和 nginx 配置同级别的目录执行</p></blockquote><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>scp -rp nginx root@120.46.190.74:/root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4、启动-nginx-容器" tabindex="-1">4、启动 nginx 容器 <a class="header-anchor" href="#_4、启动-nginx-容器" aria-label="Permalink to &quot;4、启动 nginx 容器&quot;">​</a></h3><blockquote><p>注意 映射关系 不要写错</p></blockquote><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker run --name nginx  -d -p 80:80  -v /root/nginx/log:/var/log/nginx -v /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /root/nginx/conf.d:/etc/nginx/conf.d -v /root/nginx/html:/usr/share/nginx/html f00ab1b3ac6d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_5、验证-nginx" tabindex="-1">5、验证 nginx <a class="header-anchor" href="#_5、验证-nginx" aria-label="Permalink to &quot;5、验证 nginx&quot;">​</a></h3><p>此时在浏览器输入服务器 IP，能看到 nginx 文件夹下的<code>index.html</code>页面</p><h2 id="部署前端" tabindex="-1">部署前端 <a class="header-anchor" href="#部署前端" aria-label="Permalink to &quot;部署前端&quot;">​</a></h2><p>1、在前端项目进行 <code>build</code></p><p>2、将 biuld 出来的文件，复制到 nginx 文件夹下，然后重新上传到服务器</p><p>3、浏览器输入服务器 ip，可以看到前端页面。【会有问题，因为服务端还没有部署】</p><h2 id="部署-server" tabindex="-1">部署 server <a class="header-anchor" href="#部署-server" aria-label="Permalink to &quot;部署 server&quot;">​</a></h2><h3 id="_1、在服务端项目中编写-dockerfile" tabindex="-1">1、在服务端项目中编写 Dockerfile <a class="header-anchor" href="#_1、在服务端项目中编写-dockerfile" aria-label="Permalink to &quot;1、在服务端项目中编写 Dockerfile&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 使用node镜像</span></span>
<span class="line"><span>FROM node:18.15.0</span></span>
<span class="line"><span># 在容器中新建目录文件夹 egg</span></span>
<span class="line"><span>RUN mkdir -p /egg</span></span>
<span class="line"><span># 将 /egg 设置为默认工作目录</span></span>
<span class="line"><span>WORKDIR /egg</span></span>
<span class="line"><span># 将 package.json 复制默认工作目录</span></span>
<span class="line"><span>COPY package.json /egg/package.json</span></span>
<span class="line"><span># 安装依赖</span></span>
<span class="line"><span>RUN yarn config set register https://registry.npm.taobao.org</span></span>
<span class="line"><span>RUN yarn --production</span></span>
<span class="line"><span># 再copy代码至容器</span></span>
<span class="line"><span>COPY ./ /egg</span></span>
<span class="line"><span>#7001端口</span></span>
<span class="line"><span>EXPOSE 7001</span></span>
<span class="line"><span>#等容器启动之后执行脚本</span></span>
<span class="line"><span>CMD yarn prod</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2、eggjs-新增生产环境配置" tabindex="-1">2、Eggjs 新增生产环境配置 <a class="header-anchor" href="#_2、eggjs-新增生产环境配置" aria-label="Permalink to &quot;2、Eggjs 新增生产环境配置&quot;">​</a></h3><p>新增 eggs 生产环境的 config, 注意更换 ip 和 数据库相关的账号密码</p><h3 id="_3、将后端代码上传到服务器" tabindex="-1">3、将后端代码上传到服务器 <a class="header-anchor" href="#_3、将后端代码上传到服务器" aria-label="Permalink to &quot;3、将后端代码上传到服务器&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>scp -rp eggjs.zip root@120.46.190.74:/root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4、在服务器解压" tabindex="-1">4、在服务器解压 <a class="header-anchor" href="#_4、在服务器解压" aria-label="Permalink to &quot;4、在服务器解压&quot;">​</a></h3><p>将 egg.zip 解压到 server 目录</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>unzip -u -d server egg.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_5、配置-docker-容器中的-mysql-权限" tabindex="-1">5、配置 docker 容器中的 mysql 权限 <a class="header-anchor" href="#_5、配置-docker-容器中的-mysql-权限" aria-label="Permalink to &quot;5、配置 docker 容器中的 mysql 权限&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>// 进入mysql容器</span></span>
<span class="line"><span>docker exec -it 9e7c5fcb1720 sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>进入 mysql</span></span>
<span class="line"><span>mysql -u root -p</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 修改权限</span></span>
<span class="line"><span>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; WITH GRANT OPTION;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 刷新权限</span></span>
<span class="line"><span>FLUSH PRIVILEGES;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 修改加密规则</span></span>
<span class="line"><span>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; PASSWORD EXPIRE NEVER;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 更新root用户密码</span></span>
<span class="line"><span>ALTER USER &#39;root&#39;@&#39;%&#39;  IDENTIFIED WITH mysql_native_password BY &#39;yxh1998426&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 刷新权限</span></span>
<span class="line"><span>FLUSH PRIVILEGES;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>// mysql 8.0 以后直接使用nodejs链接会报错，所以需要进行以上操作</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_6、构建-eggjs-镜像" tabindex="-1">6、构建 eggjs 镜像 <a class="header-anchor" href="#_6、构建-eggjs-镜像" aria-label="Permalink to &quot;6、构建 eggjs 镜像&quot;">​</a></h3><p>[实际上是创建 node 环境, 并执行 dockerfile 的内容]</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker build -t egg:v1.0 ./server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看是否构建成功：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker images</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328204915.png#id=HfY5W&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="_7、运行-egg-容器" tabindex="-1">7、运行 egg 容器 <a class="header-anchor" href="#_7、运行-egg-容器" aria-label="Permalink to &quot;7、运行 egg 容器&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker run -d -p 7001:7001 --name server 17fbded3aab6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://qn.huat.xyz/mac/20230328205115.png#id=yVU14&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>查看日志：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker logs -f 230498f25619</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,91),l=[p];function r(t,o,d,c,h,m){return e(),s("div",null,l)}const g=a(i,[["render",r]]);export{b as __pageData,g as default};
